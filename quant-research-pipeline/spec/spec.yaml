# spec.yaml â€” Single source of truth for strategy specification
# Schema-first: this is the contract between synth/ and repo/
# If SPEC.md conflicts with this file, this file wins.

strategy_id: "momentum_strategy_v1"

version: "0.1.0"

status: draft  # draft | review | locked



hypotheses:

  h0: "There is no significant relationship between past price changes and future returns."                            # null hypothesis

  h1: "Past positive price changes lead to future positive returns (momentum effect)."                            # alternative hypothesis

  test: "t-test on strategy returns vs. benchmark returns"                          # e.g. "two-sided t-test"

  alpha: 0.05

  effect_size: 0.2 # Cohen's d for small effect



signal:

  name: "Relative Strength Index (RSI) Crossover"

  formula_latex: "" # To be filled from formula.md

  inputs:

    - name: "close_price"

      dtype: "float64"                   # float64 | int64 | str | bool | datetime

      frequency: "1d"               # tick | 1m | 5m | 1d | 1w | 1mo

      source: "Yahoo Finance"                  # e.g. CRSP, Yahoo, Binance

    - name: "volume"

      dtype: "int64"

      frequency: "1d"

      source: "Yahoo Finance"

  parameters:

    - name: "rsi_period"

      value: 14

      tunable: true

    - name: "oversold_threshold"

      value: 30

      tunable: false

    - name: "overbought_threshold"

      value: 70

      tunable: false



data_schema:

  universe: "S&P 500 constituents"                      # e.g. "S&P 500", "US large-cap equity"

  columns:

    - name: "timestamp"

      dtype: "datetime"

      nullable: false

    - name: "symbol"

      dtype: "str"

      nullable: false

    - name: "close_price"

      dtype: "float64"

      nullable: false

    - name: "volume"

      dtype: "int64"

      nullable: false

  splits:

    train:

      start: "2010-01-01"                   # YYYY-MM-DD

      end: "2018-12-31"

    validate:

      start: "2019-01-01"

      end: "2021-12-31"

    holdout:

      start: "2022-01-01"

      end: "2023-12-31"



module_apis:

  - module: "signals"                    # e.g. "signals", "portfolio", "backtest"

    functions:

      - name: "calculate_rsi"

        args:

          - name: "prices"

            type: "pd.Series"

          - name: "period"

            type: "int"

        returns: "pd.Series"

        description: "Calculates the Relative Strength Index (RSI)."

  - module: "portfolio"

    functions:

      - name: "allocate_weights"

        args:

          - name: "signals"

            type: "pd.DataFrame"

          - name: "risk_params"

            type: "dict"

        returns: "pd.DataFrame"

        description: "Allocates portfolio weights based on signals and risk parameters."



test_plan:

  unit_tests:

    - function: "calculate_rsi"

      cases:

        - input:

            prices: [10, 11, 12, 11, 10, 9, 10, 11, 12, 13, 14, 13, 12, 11, 10]

            period: 3

          expected: [null, null, 100.0, 66.67, 33.33, 0.0, 33.33, 66.67, 100.0, 100.0, 100.0, 66.67, 33.33, 0.0, 0.0] # Example values, needs actual calculation

  property_tests:

    - invariant: "RSI values must always be between 0 and 100."

    - invariant: "When all prices increase, RSI should increase or stay at 100."



success_criteria:

  metrics:

    - name: "sharpe_ratio"                    # e.g. sharpe_ratio, cagr, max_drawdown

      threshold: 1.5

      direction: ">"              # ">" or "<"

    - name: "max_drawdown"

      threshold: 0.15

      direction: "<"

    - name: "cagr"

      threshold: 0.10

      direction: ">"


